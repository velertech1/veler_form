/* --- Variables de Layout (Referencia) --- */
/* :root {
    --top-bar-height: 70px;
    --sidebar-width-expanded: 280px;
    --sidebar-width-collapsed: 70px;
} */

/* --- Sidebar de Navegación (Usando Variables de Tema Específicas) --- */
#sidebar-navegacion {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: var(--sidebar-width-expanded);
    z-index: 15;
    /* --- VARIABLE: Usa variable de fondo del sidebar --- */
    background-color: var(--sidebar-bg, var(--bg-container)); /* Fallback al fondo general */
    display: flex;
    flex-direction: column;
    transition: width 0.3s ease, background-color 0.3s ease;
    /* --- VARIABLE: Usa variable de borde del sidebar --- */
    border-right: 1px solid var(--sidebar-border-color, var(--border)); /* Fallback al borde general */
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
}

/* --- Área Superior (Logo y Toggle) --- */
.sidebar-top-area {
    height: var(--top-bar-height);
    /* --- VARIABLE: Usa variable de fondo (puede ser la misma que sidebar-bg o específica) --- */
    background-color: var(--sidebar-top-bg, var(--sidebar-bg, var(--header-bg))); /* Fallback a sidebar-bg o header-bg */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    flex-shrink: 0;
    box-sizing: border-box;
    /* --- VARIABLE: Usa variable de borde --- */
    border-bottom: 1px solid var(--sidebar-border-color, var(--border)); /* Fallback al borde general */
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

#logo-veler-sidebar {
    max-height: 55%;
    width: auto;
    transition: opacity 0.2s ease-in-out 0.1s, visibility 0.2s ease-in-out 0.1s;
    /* Contraste depende del --sidebar-top-bg */
}

.sidebar-toggle {
    position: relative;
    background: transparent;
    /* --- VARIABLE: Color del icono del toggle --- */
    color: var(--sidebar-toggle-color); /* Eliminado fallback, depende 100% de la variable */
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: none;
    transition: transform 0.3s ease, color 0.3s ease, background-color 0.2s ease;
    margin-left: 10px;
}
.sidebar-toggle:hover {
     /* --- VARIABLE: Fondo hover del toggle --- */
     background-color: var(--sidebar-toggle-hover-bg, rgba(var(--accent-color-rgb, 252, 108, 17), 0.15));
}

/* --- Área Inferior (Menú y Progreso) --- */
.sidebar-bottom-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* --- VARIABLE: Fondo área inferior (usualmente igual a --sidebar-bg) --- */
    background-color: var(--sidebar-bottom-bg, var(--sidebar-bg, var(--bg-container)));
    transition: background-color 0.3s ease;
}

.sidebar-menu {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 0;
}

.sidebar-menu ul { list-style: none; padding: 0; margin: 0; }

/* Estilos .menu-item, :hover, .active */
.menu-item { display: flex; align-items: center; padding: 10px 20px; cursor: pointer; position: relative; overflow: hidden; white-space: nowrap; transition: background-color 0.2s ease, padding 0.3s ease, border-color 0.3s ease; }
.menu-item:hover {
    /* --- VARIABLE: Fondo hover ítem --- */
    background-color: var(--sidebar-item-hover-bg, rgba(var(--accent-color-rgb, 252, 108, 17), 0.1));
}
.menu-item.active {
    /* --- VARIABLE: Fondo activo ítem --- */
    background-color: var(--sidebar-item-active-bg, rgba(var(--accent-color-rgb, 252, 108, 17), 0.2));
    /* --- VARIABLE: Borde activo ítem --- */
    border-left: 3px solid var(--sidebar-item-active-border, var(--accent-color));
    padding-left: 17px !important;
}
/* --- VARIABLE: Color texto/icono activo --- */
.menu-item.active .menu-text, .menu-item.active .menu-icon {
    color: var(--sidebar-item-active-color, var(--accent-color));
}
.menu-item.active .menu-text { font-weight: 500; }

/* Estilos .menu-icon, .menu-text, .menu-status */
.menu-icon {
    margin-right: 12px;
    font-size: 1.2rem;
    /* --- VARIABLE: Color icono --- */
    color: var(--sidebar-icon-color, var(--text-color-secondary));
    flex-shrink: 0;
    transition: margin 0.3s ease, color 0.3s ease;
}
.menu-text {
    flex-grow: 1;
    font-size: 0.95rem;
    /* --- VARIABLE: Color texto --- */
    color: var(--sidebar-text-color, var(--text-color-primary));
    transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out, color 0.3s ease;
}
.menu-status {
    width: 10px;
    height: 10px;
    margin-left: auto;
    /* --- VARIABLE: Color status --- */
    background-color: var(--sidebar-status-default-bg, var(--border));
    border-radius: 50%;
    flex-shrink: 0;
    transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out, background-color 0.3s ease;
}
.menu-item.completed .menu-status {
    /* --- VARIABLE: Color status completado --- */
    background-color: var(--sidebar-status-completed-bg, #4CAF50); /* Verde por defecto */
}

/* Estilos .sidebar-progress, .progress-bar, .progress-fill, .progress-text */
.sidebar-progress {
    padding: 15px 20px;
     /* --- VARIABLE: Borde superior progreso --- */
    border-top: 1px solid var(--sidebar-border-color, var(--border));
    flex-shrink: 0;
    background-color: inherit; /* Hereda fondo del contenedor padre */
    transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out, border-color 0.3s ease;
}
.progress-bar {
    width: 100%;
    height: 6px;
    margin-bottom: 8px;
    /* --- VARIABLE: Fondo barra progreso --- */
    background-color: var(--sidebar-progress-bar-bg, var(--border));
    border-radius: 3px;
    overflow: hidden;
    transition: background-color 0.3s ease;
}
.progress-fill {
    height: 100%;
    width: 0%;
    /* --- VARIABLE: Relleno barra progreso --- */
    background-color: var(--sidebar-progress-fill-bg, var(--accent-color));
    transition: width 0.3s ease, background-color 0.3s ease;
}
.progress-text {
    display: block;
    text-align: center;
    font-size: 0.85rem;
    /* --- VARIABLE: Color texto progreso --- */
    color: var(--sidebar-text-color, var(--text-color-secondary)); /* Fallback a texto secundario general */
    transition: color 0.3s ease;
}

/* --- Estados Sidebar (Sin cambios estructurales, dependen de las variables) --- */
/* Expandido (Default) */
body.body-sidebar-expanded #sidebar-navegacion { width: var(--sidebar-width-expanded); }
body.body-sidebar-expanded #logo-veler-sidebar { opacity: 1; visibility: visible; transition-delay: 0.1s; }
body.body-sidebar-expanded .menu-text,
body.body-sidebar-expanded .sidebar-progress,
body.body-sidebar-expanded .menu-status { opacity: 1; visibility: visible; }
body.body-sidebar-expanded .menu-icon { margin-right: 12px; }
body.body-sidebar-expanded .menu-item { justify-content: flex-start; padding: 10px 20px; }
/* body.body-sidebar-expanded .menu-item.active { padding-left: 17px; border-left-width: 3px; } */

/* Colapsado (Estilos para mostrar solo iconos) */
body.body-sidebar-collapsed #sidebar-navegacion { width: var(--sidebar-width-collapsed); }
body.body-sidebar-collapsed #logo-veler-sidebar { opacity: 0; visibility: hidden; transition-delay: 0s; }

/* Ocultar texto, progreso y status en modo colapsado */
body.body-sidebar-collapsed .menu-text,
body.body-sidebar-collapsed .sidebar-progress,
body.body-sidebar-collapsed .menu-status {
    opacity: 0 !important;
    visibility: hidden !important;
    position: absolute !important;
    width: 0 !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    pointer-events: none;
}

/* Centrar icono y ajustar padding en modo colapsado */
body.body-sidebar-collapsed .menu-item {
    justify-content: center !important;
    padding: 12px 0 !important;
}
body.body-sidebar-collapsed .menu-icon {
    margin: 0 !important;
}

/* Quitar borde izquierdo activo en modo colapsado */
body.body-sidebar-collapsed .menu-item.active {
    border-left-width: 0;
    padding-left: 0 !important;
    background-color: var(--sidebar-item-active-bg, rgba(var(--accent-color-rgb, 252, 108, 17), 0.2)); /* Usa variable */
}
body.body-sidebar-collapsed .menu-item.active .menu-icon {
    color: var(--sidebar-item-active-color, var(--accent-color)); /* Usa variable */
}

/* Aplicar color específico del toggle en estado colapsado */
body.body-sidebar-collapsed .sidebar-toggle {
    /* Usa la variable específica para colapsado, con fallback a la normal */
    color: var(--sidebar-toggle-collapsed-color, var(--sidebar-toggle-color));
}