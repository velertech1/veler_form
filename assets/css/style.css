/* === INICIO: assets/css/style.css (Optimizado) === */

/* --- Fuentes Personalizadas --- */
/* Define la fuente 'SF Pro Display' con diferentes pesos y estilos */
@font-face {
    font-family: 'SF Pro Display';
    src: url('../fonts/SFPRODISPLAYREGULAR.OTF') format('opentype');
    font-weight: 400; /* Regular */
    font-style: normal;
    font-display: swap;
}
@font-face {
    font-family: 'SF Pro Display';
    src: url('../fonts/SFPRODISPLAYBOLD.OTF') format('opentype');
    font-weight: 700; /* Bold */
    font-style: normal;
    font-display: swap;
}
@font-face {
    font-family: 'SF Pro Display';
    src: url('../fonts/SFPRODISPLAYMEDIUM.OTF') format('opentype');
    font-weight: 500; /* Medium */
    font-style: normal;
    font-display: swap;
}
/* ... (Otras @font-face omitidas por brevedad, deben incluirse todas) ... */
@font-face {
    font-family: 'SF Pro Display';
    src: url('../fonts/SFPRODISPLAYULTRALIGHTITALIC.OTF') format('opentype');
    font-weight: 100; /* Ultralight */
    font-style: italic; /* Italic */
    font-display: swap;
}

/* --- Variables de Colores --- */
/* Define la paleta de colores principal y para el tema claro */
:root {
    /* Tema Oscuro (Predeterminado) */
    --bg-color: #1E1E1E;
    --bg-container: #1E1E1E;
    --text-color-primary: #F0E6D2; /* Texto principal claro */
    --text-color-secondary: #CCCCCC; /* Texto secundario grisáceo */
    --accent-color: #F7D7A5; /* Acento: Dorado pálido */
    --input-bg: #3D3D3C;
    --input-text-color: var(--text-color-primary);
    --input-placeholder-color: #C8B575;
    --button-primary-bg: var(--accent-color);
    --button-primary-text: #1E1E1E; /* Texto oscuro para contraste en botón primario */
    --button-secondary-bg: #161616;
    --button-secondary-text: var(--accent-color);
    --border: #444; /* Bordes sutiles */
    --error-alert: #E57373; /* Color para errores */
    --logo-line-color: var(--accent-color); /* Línea divisora logos */
    --modal-bg: var(--bg-container);
    --modal-text: var(--text-color-primary);
    --header-bg: var(--bg-container);
    /* Versiones RGB para usar con opacidad (ej. box-shadow) */
    --accent-color-rgb: 247, 215, 165;
    --bg-color-rgb: 30, 30, 30;
    --text-color-primary-rgb: 240, 230, 210;
}

/* Tema Claro */
:root.light-theme {
    --bg-color: #FFFFFF;
    --bg-container: #ffffff;
    --text-color-primary: #0d3a7c; /* Azul oscuro GNP */
    --text-color-secondary: #495057; /* Gris oscuro texto */
    --accent-color: #fc6c11; /* Naranja GNP */
    --input-bg: #f6f6f6;
    --input-text-color: var(--text-color-primary);
    --input-placeholder-color: #7495bc; /* Azul grisáceo placeholder */
    --button-primary-bg: var(--accent-color);
    --button-primary-text: #FFFFFF; /* Texto blanco para contraste */
    --button-secondary-bg: #ffffff;
    --button-secondary-text: #212529; /* Texto oscuro botón secundario */
    --border: #DEE2E6;
    --error-alert: #dc3545; /* Rojo Bootstrap */
    --logo-line-color: #DEE2E6;
    --modal-bg: var(--bg-color);
    --modal-text: var(--text-color-primary);
    --header-bg: var(--bg-container);
    --accent-color-rgb: 252, 108, 17;
    --bg-color-rgb: 255, 255, 255;
    --text-color-primary-rgb: 13, 58, 124;
}

/* --- Estilos Base --- */
/* Estilos generales para el body y elementos comunes */
body {
    display: flex;
    flex-direction: column;
    align-items: center; /* Centra contenido principal horizontalmente */
    min-height: 100vh;
    margin: 0;
    padding-top: 80px; /* Espacio para cabecera fija */
    box-sizing: border-box;
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-color);
    transition: background-color 0.3s ease; /* Suaviza cambio de tema */
}

h2 {
    margin: 0 0 20px 0; /* Shorthand margin */
    font-weight: 700;
    color: var(--text-color-primary);
    font-style: normal;
}

.subtitulo-ligero {
    margin: -15px 0 20px 0; /* Shorthand margin */
    font: italic 300 0.9em 'SF Pro Display'; /* Shorthand font */
    color: var(--text-color-secondary);
}

/* --- Splash Screen --- */
/* Pantalla de carga inicial */
#splash-screen {
    position: fixed;
    inset: 0; /* Shorthand para top, right, bottom, left = 0 */
    z-index: 20; /* Encima de otros elementos */
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--bg-container);
    opacity: 0; /* Inicia invisible */
    transition: opacity 0.5s ease-in-out;
    pointer-events: none; /* No interactuable cuando invisible */
}
#splash-screen .logos-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 90%;
    max-width: 600px;
}
#splash-screen .logos-wrapper img {
    max-height: 150px;
    margin: 0 4px; /* Espaciado entre logos/línea */
    width: auto;
    flex-shrink: 1;
    transition: transform 0.3s ease;
}
#splash-screen .linea-divisora {
    width: 2px;
    height: 100px;
    margin: 0 20px;
    background-color: var(--accent-color);
    flex-shrink: 0; /* Evita que se encoja */
}

/* --- Cabecera Principal --- */
/* Cabecera fija superior */
#main-header {
    display: none; /* Se muestra con JS */
    height: 80px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 10; /* Debajo del splash, encima del form */
    display: flex; /* Se corrigió de none a flex para centrar contenido */
    justify-content: center;
    align-items: center;
    padding: 0;
    background-color: var(--header-bg);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Sombra sutil */
    transition: background-color 0.3s ease;
}
#main-header .header-content-wrapper {
    display: flex;
    justify-content: space-between; /* Logos izquierda, switch derecha */
    align-items: center;
    width: 100%;
    max-width: 960px; /* Ancho máximo del contenido interno */
    padding: 0 15px; /* Padding horizontal interno */
    box-sizing: border-box;
}
#main-header .logos-wrapper {
     display: flex;
     align-items: center;
     flex-grow: 1; /* Ocupa espacio disponible */
     overflow: hidden; /* Evita desbordamiento de logos */
}
#main-header .logos-wrapper img {
    max-height: 50px; /* Tamaño final logos cabecera */
    margin: 0 15px;
    flex-shrink: 0; /* Evita que se encojan */
    transition: transform 0.3s ease;
}
#main-header .linea-divisora {
    width: 2px;
    height: 40px;
    margin: 0 15px;
    background-color: var(--logo-line-color);
    flex-shrink: 0;
}
#main-header .theme-switch-wrapper {
    display: flex;
    align-items: center;
    flex-shrink: 0; /* Evita que se encoja */
}

/* --- Ajuste Logos --- */
/* Ajusta tamaño relativo de los logos */
#splash-screen #logo1-splash,
#main-header #logo1-header {
    transform: scale(1.1); /* Logo Veler un poco más grande */
    transform-origin: center center;
}
#splash-screen #logo2-splash,
#main-header #logo2-header {
    transform: scale(0.75); /* Logo GNP un poco más pequeño */
    transform-origin: center center;
}

/* --- Formulario Principal --- */
/* Contenedor del formulario multi-paso */
#formulario-completo {
    width: 80%;
    max-width: 600px;
    margin: 10px auto 40px auto; /* Centrado horizontal con auto */
    padding: 0 30px 30px 30px; /* Padding interno (sin padding superior) */
    background-color: var(--bg-container);
    border-radius: 20px;
    text-align: left;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    position: relative; /* Para z-index si es necesario */
    z-index: 1;
    transition: margin-left 0.3s ease, width 0.3s ease, opacity 0.3s ease, background-color 0.3s ease;
    /* display: none; <- Controlado por JS */
}

/* --- Secciones del Formulario --- */
/* Estilos para cada paso/sección del formulario */
.seccion-formulario {
    margin-bottom: 20px;
    padding: 0; /* Padding ya está en #formulario-completo */
    border-radius: 20px; /* Hereda borde redondeado */
    display: none; /* Se muestra con JS */
    opacity: 0; /* Para efecto fade in/out */
    transition: opacity 0.4s ease-in-out;
    width: 100%;
    box-sizing: border-box;
}
.seccion-formulario.seccion-activa {
    display: block;
    opacity: 1;
}

/* --- Grupos de Campos (Preguntas) --- */
.form-group {
    margin-bottom: 15px;
    display: flex;
    flex-direction: column; /* Label encima del input */
}
.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    font-size: 0.9em;
    color: var(--text-color-secondary);
}
/* Estilo especial para labels de checkboxes/radios */
.form-group label:has(input[type="checkbox"]),
.form-group label:has(input[type="radio"]) {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-weight: normal; /* Texto normal, no bold */
}

/* --- Campos de Formulario (Inputs, Selects, etc.) --- */
.form-control {
    width: 100%;
    padding: 10px 15px;
    font-size: 1rem;
    color: var(--input-text-color);
    background-color: var(--input-bg);
    border: none; /* Sin borde general */
    border-left: 3px solid var(--accent-color); /* Borde izquierdo acentuado */
    border-radius: 0 20px 20px 0; /* Redondeado a la derecha */
    box-sizing: border-box;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease, color 0.3s ease;
}

/* --- Checkbox y Radio Buttons --- */
input[type="checkbox"],
input[type="radio"] {
    width: 1em; /* Tamaño relativo a fuente */
    height: 1em;
    margin-right: 0.5em;
    vertical-align: middle; /* Mejor alineación vertical */
    accent-color: var(--accent-color); /* Color del check/dot */
    cursor: pointer;
}
/* Si se aplica .form-control (no recomendado), resetea estilos */
input[type="checkbox"].form-control,
input[type="radio"].form-control {
    appearance: auto; /* Usa apariencia nativa */
    width: auto;
    height: auto;
    background-color: transparent;
    border: none;
    border-radius: 0;
    padding: 0;
    box-shadow: none;
    border-left: none;
}

/* --- Botones de Navegación del Formulario --- */
.botones-navegacion {
    margin-top: 25px;
    padding-top: 20px; /* Espacio sobre botones */
    display: flex;
    justify-content: flex-end; /* Alinea a la derecha por defecto */
    gap: 10px; /* Espacio entre botones */
    border-top: 1px solid var(--border);
}
/* Si solo hay un botón (ej. primer paso), ocupa todo el espacio a la derecha */
.botones-navegacion button:only-child {
    margin-left: auto;
}
/* Centra botones en la sección de revisión */
#seccion-revision .botones-navegacion {
    justify-content: center;
    gap: 15px;
}

/* --- Estilos Comunes Botones (Siguiente, Anterior, Primario) --- */
.btn-siguiente,
.btn-anterior,
.btn-primary {
    padding: 10px 25px; /* Más padding horizontal */
    border: none;
    border-radius: 25px; /* Más redondeado */
    cursor: pointer;
    font-weight: 600;
    font-size: 0.95rem;
    text-transform: uppercase; /* Opcional: mayúsculas */
    letter-spacing: 0.5px; /* Opcional: espaciado letras */
    transition: background-color 0.3s ease, opacity 0.3s ease, transform 0.1s ease, color 0.3s ease, border-color 0.3s ease;
}
/* Botón primario y siguiente (mismo estilo base) */
.btn-siguiente,
.btn-primary {
    background-color: var(--button-primary-bg);
    color: var(--button-primary-text);
}
/* Botón anterior (secundario) */
.btn-anterior {
    background-color: var(--button-secondary-bg);
    color: var(--button-secondary-text);
    border: 1px solid var(--accent-color); /* Borde con color de acento */
}
/* Efecto al presionar */
.btn-siguiente:active,
.btn-anterior:active,
.btn-primary:active {
    transform: scale(0.98);
}
/* Efecto hover */
.btn-siguiente:hover,
.btn-anterior:hover,
.btn-primary:hover {
    opacity: 0.85;
}

/* --- Placeholder y Focus --- */
.form-control::placeholder {
    color: var(--input-placeholder-color);
    opacity: 0.7; /* Un poco más sutil */
}
.form-control:focus {
    border-color: var(--accent-color); /* Mantiene color acento */
    outline: none; /* Quita outline por defecto */
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb), 0.3); /* Sombra de foco sutil */
}

/* --- Estilos Específicos Inputs --- */
/* Select (combobox) */
select.form-control {
    appearance: none; /* Quita apariencia nativa */
    /* Flecha SVG como fondo (color usa variable --text-color-secondary) */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-chevron-down' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center; /* Posición flecha */
    background-size: 1em 1em; /* Tamaño relativo flecha */
    padding-right: 40px; /* Espacio para la flecha */
    color: var(--input-text-color); /* Color texto (y flecha por defecto) */
}
/* Ajuste color flecha tema claro (sobrescribe fill='currentColor' del SVG) */
:root.light-theme select.form-control {
     background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23495057' class='bi bi-chevron-down' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); /* Color #495057 = --text-color-secondary */
}
/* Textarea */
textarea.form-control {
    min-height: 80px;
    resize: vertical; /* Permitir redimensionar solo verticalmente */
}

/* --- Modo Revisión --- */
/* Estilos cuando se muestra el resumen final */
#formulario-completo.modo-revision .seccion-formulario {
    display: block !important; /* Muestra todas las secciones */
    opacity: 1 !important;
    transition: none !important;
    margin-bottom: 30px;
    padding: 25px;
    border: 1px solid var(--border);
    border-radius: 15px;
    background-color: rgba(var(--text-color-primary-rgb, 0, 0, 0), 0.05); /* Fondo sutil basado en color texto */
}
#formulario-completo.modo-revision .question-group {
    margin-bottom: 15px;
}
/* Oculta botones de navegación internos en modo revisión */
#formulario-completo.modo-revision .seccion-formulario .botones-navegacion {
    display: none;
}
/* Estilos específicos para la sección de revisión */
#formulario-completo.modo-revision #seccion-revision {
    display: block !important;
    opacity: 1 !important;
    border: none; /* Sin borde extra */
    padding: 15px 0;
    background-color: transparent; /* Sin fondo especial */
}
/* Oculta sección revisión por defecto (fuera de modo revisión) */
#seccion-revision { display: none; }

#seccion-revision h2 {
    color: var(--accent-color);
    text-align: center;
    margin-bottom: 15px;
}
#seccion-revision p {
    color: var(--text-color-secondary);
    text-align: center;
    margin-bottom: 30px;
}
/* Contenedor del resumen final */
#seccion-revision #resumen-final {
    margin-bottom: 30px;
    padding: 25px;
    border-radius: 8px;
    border: 1px solid var(--border);
    color: var(--text-color-secondary);
    background-color: rgba(var(--text-color-primary-rgb, 0, 0, 0), 0.03); /* Fondo más sutil */
    text-align: left; /* Alinea texto del resumen a la izquierda */
}
#seccion-revision #resumen-final ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
#seccion-revision #resumen-final li {
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px dotted var(--border);
    line-height: 1.6;
    display: flex; /* Permite alinear label y valor */
    flex-wrap: wrap; /* Permite que el valor pase abajo si no cabe */
    gap: 8px; /* Espacio entre label y valor */
}
#seccion-revision #resumen-final li:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}
#seccion-revision #resumen-final li strong {
    color: var(--text-color-primary);
    display: inline-block; /* O block si se prefiere en línea separada */
    min-width: 150px; /* Ancho mínimo para la etiqueta (ajustar) */
    font-weight: 600;
    flex-shrink: 0; /* Evita que la etiqueta se encoja */
}

/* --- Modal (Ventana Emergente) --- */
/* Fondo oscuro detrás del modal */
#modal-overlay {
    display: none; /* Controlado por JS */
    position: fixed;
    inset: 0;
    z-index: 1000;
    background-color: rgba(var(--bg-color-rgb), 0.7); /* Fondo semi-transparente */
    backdrop-filter: blur(5px); /* Efecto blur opcional */
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}
/* Contenedor del modal */
#modal-container {
    display: none; /* Controlado por JS */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95); /* Posición y escala inicial */
    width: 90%;
    max-width: 480px;
    padding: 35px 40px;
    background-color: var(--modal-bg);
    border-radius: 10px;
    border: 1px solid var(--border);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5); /* Sombra pronunciada */
    z-index: 1001;
    text-align: center;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}
/* Estilos cuando el modal está visible (clase añadida al body) */
body.modal-visible #modal-overlay {
    display: block;
    opacity: 1;
}
body.modal-visible #modal-container {
    display: block;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1); /* Escala final */
}
/* Área para el icono/logo del modal */
#modal-icon-area {
    margin-bottom: 25px;
}
#modal-error-icon {
    font-size: 64px; /* Tamaño icono error */
    color: var(--error-alert);
    display: none; /* Mostrar según tipo de modal */
    vertical-align: middle;
}
#modal-success-logo {
    max-height: 70px; /* Tamaño logo éxito */
    display: none; /* Mostrar según tipo de modal */
}
#modal-title {
    margin: 0 0 15px 0;
    font-size: 1.6em;
    font-weight: 600;
    color: var(--accent-color);
}
#modal-message {
    margin-bottom: 30px;
    font-size: 1.1em;
    line-height: 1.6;
    color: var(--modal-text);
}
#modal-buttons {
     display: flex;
     justify-content: center;
     gap: 15px;
}
#modal-buttons button {
    margin: 0;
    min-width: 100px;
    /* Hereda estilos de .btn-primary, .btn-anterior */
}

/* --- Iconos Material Symbols --- */
/* Estilos base para los iconos de Google Fonts */
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
   vertical-align: middle; /* Mejor alineación */
   line-height: 1; /* Evita espacio extra */
   font-size: 1.2em; /* Tamaño por defecto */
   display: inline-block; /* Asegura que se comporte como bloque */
}
/* Iconos específicos */
#modal-error-icon.material-symbols-outlined { font-size: 64px; }
.slider .icon.material-symbols-outlined {
     font-size: 16px; /* Tamaño icono switch */
     position: absolute; /* Posicionamiento dentro del slider */
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%); /* Centrado exacto */
}

/* --- Switch de Tema --- */
/* Interruptor para cambiar entre tema claro y oscuro */
.theme-switch { /* Label que actúa como switch */
    position: relative;
    display: block;
    width: 50px;
    height: 25px;
    cursor: pointer;
    background-color: var(--input-bg);
    border: 1px solid var(--accent-color);
    border-radius: 25px;
    text-indent: -9999px; /* Oculta texto del label */
    transition: background-color 0.3s ease;
}
.theme-switch input[type="checkbox"] { /* Checkbox real oculto */
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
}
.theme-switch .slider { /* Círculo deslizante */
    position: absolute;
    top: 1px;
    left: 1px;
    width: 21px;
    height: 21px;
    background-color: var(--accent-color);
    border-radius: 50%;
    transition: transform 0.3s ease, background-color 0.3s ease;
    overflow: hidden; /* Oculta iconos que se salen */
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
.slider .icon { /* Iconos sol/luna dentro del slider */
    line-height: 1;
    transition: opacity 0.3s ease, transform 0.3s ease;
    color: var(--button-primary-text); /* Color del icono */
    /* Posición absoluta ya definida en .material-symbols-outlined */
}
/* Estado inicial (tema oscuro) */
.slider .sun { opacity: 0; transform: translate(-50%, -50%) scale(0) rotate(-90deg); }
.slider .moon { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
/* Estado cuando está activo (tema claro) */
.theme-switch input:checked + .slider { transform: translateX(25px); /* Mueve el slider */ }
.theme-switch input:checked + .slider .sun { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
.theme-switch input:checked + .slider .moon { opacity: 0; transform: translate(-50%, -50%) scale(0) rotate(90deg); }


/* --- Sidebar de Navegación --- */
/* Barra lateral izquierda */
#sidebar-navegacion {
    position: fixed;
    left: 0;
    top: 80px; /* Debajo de la cabecera */
    height: calc(100vh - 80px); /* Altura restante */
    width: 280px; /* Ancho expandido por defecto */
    z-index: 5; /* Encima del contenido, debajo header/modal */
    padding: 20px 0; /* Padding vertical interno */
    box-sizing: border-box;
    background-color: var(--bg-container);
    border-right: 1px solid var(--border);
    overflow-x: hidden; /* Oculta contenido al colapsar */
    overflow-y: auto; /* Permite scroll vertical si es necesario */
    transition: width 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
}
/* Elementos internos del sidebar */
.sidebar-header,
.sidebar-menu .menu-text,
.sidebar-progress,
.menu-status { /* Elementos que se ocultan/desvanecen */
    transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
    white-space: nowrap; /* Evita salto de línea durante animación */
}
.sidebar-header {
    padding: 0 20px 15px;
    margin-bottom: 15px;
    border-bottom: 1px solid var(--border);
}
.sidebar-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-color-primary);
}
/* Menú */
.sidebar-menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.menu-item {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    cursor: pointer;
    position: relative; /* Para posicionar .menu-status si es absolute */
    overflow: hidden;
    white-space: nowrap;
    transition: background-color 0.2s ease, padding 0.3s ease; /* Transición padding para colapsar */
}
.menu-item:hover {
    background-color: rgba(var(--accent-color-rgb), 0.1); /* Fondo hover sutil */
}
.menu-item.active {
    background-color: rgba(var(--accent-color-rgb), 0.2);
    border-left: 3px solid var(--accent-color); /* Indicador activo */
}
/* Ajusta padding izquierdo cuando está activo para compensar borde */
.menu-item.active { padding-left: 17px; }
.menu-item.active .menu-text,
.menu-item.active .menu-icon {
    color: var(--accent-color); /* Color acentuado para activo */
}
.menu-item.active .menu-text { font-weight: 500; }

.menu-icon {
    margin-right: 12px;
    font-size: 1.2rem;
    color: var(--text-color-secondary);
    flex-shrink: 0; /* Evita que icono se encoja */
    transition: margin 0.3s ease; /* Animar margen al colapsar */
}
.menu-text {
    flex-grow: 1; /* Ocupa espacio restante */
    font-size: 0.95rem;
    color: var(--text-color-primary);
}
.menu-status { /* Indicador de completado */
    width: 10px;
    height: 10px;
    margin-left: auto; /* Empuja a la derecha */
    background-color: var(--border); /* Gris por defecto */
    border-radius: 50%;
    flex-shrink: 0;
    /* Transición ya definida arriba */
}
.menu-item.completed .menu-status {
    background-color: #4CAF50; /* Verde para completado */
}

/* Progreso */
.sidebar-progress {
    padding: 20px;
    margin-top: 20px;
    border-top: 1px solid var(--border);
}
.progress-bar {
    width: 100%;
    height: 6px;
    margin-bottom: 8px;
    background-color: var(--border);
    border-radius: 3px;
    overflow: hidden; /* Contiene el relleno */
}
.progress-fill {
    height: 100%;
    width: 0%; /* Controlado por JS */
    background-color: var(--accent-color);
    transition: width 0.3s ease;
}
.progress-text {
    display: block; /* Asegura que ocupe línea propia */
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-color-secondary);
}

/* --- Estados Sidebar (Desktop) --- */
/* Estado Expandido (Default o con clase) */
body.body-sidebar-expanded #sidebar-navegacion { width: 280px; }
body.body-sidebar-expanded .sidebar-header,
body.body-sidebar-expanded .menu-text,
body.body-sidebar-expanded .sidebar-progress,
body.body-sidebar-expanded .menu-status {
    opacity: 1;
    visibility: visible;
}
body.body-sidebar-expanded .menu-icon { margin-right: 12px; }
body.body-sidebar-expanded .menu-item { justify-content: flex-start; padding: 12px 20px; }
body.body-sidebar-expanded .menu-item.active { padding-left: 17px; border-left-width: 3px; }
/* Ajuste contenido principal */
body.body-sidebar-expanded #formulario-completo { margin-left: 280px; /* width: calc(100% - 300px); <-- Evitar si no es necesario */ }

/* Estado Colapsado */
body.body-sidebar-collapsed #sidebar-navegacion { width: 70px; } /* Ancho colapsado */
body.body-sidebar-collapsed .sidebar-header,
body.body-sidebar-collapsed .menu-text,
body.body-sidebar-collapsed .sidebar-progress,
body.body-sidebar-collapsed .menu-status { /* Oculta estos elementos */
    opacity: 0;
    visibility: hidden;
    pointer-events: none; /* Evita interacción fantasma */
}
body.body-sidebar-collapsed .menu-item {
    justify-content: center; /* Centra icono */
    padding: 12px 10px; /* Padding ajustado */
}
body.body-sidebar-collapsed .menu-item.active {
     border-left-width: 0; /* Oculta borde activo */
     padding-left: 10px; /* Restaura padding */
}
body.body-sidebar-collapsed .menu-icon { margin: 0; /* Sin margen para centrar */ }
/* Ajuste contenido principal */
body.body-sidebar-collapsed #formulario-completo { margin-left: 70px; /* width: calc(100% - 90px); <-- Evitar si no es necesario */ }

/* --- Botón Toggle Sidebar --- */
/* Botón flotante para controlar sidebar */
.sidebar-toggle {
    position: fixed; /* Siempre visible */
    z-index: 10; /* Encima del sidebar */
    background: var(--accent-color);
    color: var(--button-primary-text);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: left 0.3s ease, background-color 0.3s ease, color 0.3s ease; /* Anima posición y colores */
}
/* Posición del botón (Desktop) */
body.body-sidebar-expanded .sidebar-toggle { left: 260px; top: 90px; }
body.body-sidebar-collapsed .sidebar-toggle { left: 50px; top: 90px; }


/* --- Media Query Móvil --- */
/* Ajustes para pantallas pequeñas (< 768px) */
@media (max-width: 767px) {

    /* Ajustes generales */
    body { padding-top: 60px; } /* Cabecera más pequeña */

    /* Splash y Header móvil */
    #splash-screen .logos-wrapper img { max-height: 100px; margin: 0 5px; max-width: 45%; }
    #splash-screen .linea-divisora { display: none; } /* Oculta línea en splash móvil */
    #main-header { height: 60px; }
    #main-header .header-content-wrapper { padding: 0 10px; gap: 5px; }
    #main-header .logos-wrapper img { max-height: 35px; margin: 0 5px; }
    #main-header .linea-divisora { height: 30px; margin: 0 5px; }

    /* Sidebar Móvil (Deslizante) */
    #sidebar-navegacion {
        position: fixed; /* Posición fija */
        width: 85%; /* Ancho del sidebar desplegado */
        max-width: 300px; /* Ancho máximo */
        height: calc(100vh - 60px); /* Altura ajustada a cabecera */
        top: 60px;
        left: 0;
        transform: translateX(-100%); /* Oculto fuera de pantalla por defecto */
        transition: transform 0.3s ease; /* Anima deslizamiento */
        z-index: 15; /* Encima del contenido, debajo del toggle */
        border-right: 1px solid var(--border); /* Mantiene borde */
        padding: 20px 0; /* Restaura padding vertical */
        /* Resetea cualquier estado de desktop */
        overflow-y: auto;
    }
    /* Muestra sidebar cuando body tiene clase 'sidebar-visible' */
    body.sidebar-visible #sidebar-navegacion {
        transform: translateX(0);
    }
    /* En móvil, los elementos internos del sidebar siempre son visibles si el sidebar lo es */
    #sidebar-navegacion .sidebar-header,
    #sidebar-navegacion .menu-text,
    #sidebar-navegacion .sidebar-progress,
    #sidebar-navegacion .menu-status {
         opacity: 1;
         visibility: visible;
         transition: none; /* Sin fade en móvil */
         position: static; /* Resetea posición absoluta si la tenía */
         transform: none;  /* Resetea transform si lo tenía */
    }
    #sidebar-navegacion .menu-item { justify-content: flex-start; padding: 12px 20px; } /* Alineación y padding normales */
    #sidebar-navegacion .menu-item.active { border-left-width: 3px; padding-left: 17px; } /* Muestra borde activo */
    #sidebar-navegacion .menu-icon { margin-right: 12px; } /* Margen normal icono */
    #sidebar-navegacion .menu-status { margin-left: auto; width: 10px; height: 10px; } /* Estado normal */

    /* Formulario Móvil */
    #formulario-completo {
        width: 95%; /* Más ancho en móvil */
        max-width: 95%;
        padding: 0 15px 15px 15px; /* Menos padding */
        margin: 10px auto 20px auto; /* Margen ajustado, centrado */
        margin-left: auto !important; /* Sobrescribe margen de sidebar desktop */
        transition: opacity 0.3s ease; /* Solo anima opacidad */
        opacity: 1; /* Visible por defecto */
        pointer-events: auto; /* Interactivo por defecto */
    }
    /* Oscurece formulario cuando sidebar está visible en móvil */
    body.sidebar-visible #formulario-completo {
        opacity: 0.3;
        pointer-events: none; /* No interactivo */
    }
    /* Ajustes campos formulario móvil */
    .form-control { padding: 12px 15px; font-size: 0.95rem; }
    select.form-control { background-position: right 10px center; background-size: 0.9em; padding-right: 35px; }

    /* Botones Formulario Móvil */
    .botones-navegacion { gap: 8px; padding-top: 15px; }
    .btn-siguiente,
    .btn-anterior,
    .btn-primary {
        padding: 10px 15px; /* Menos padding */
        font-size: 0.9rem; /* Fuente más pequeña */
        flex-grow: 1; /* Ocupan espacio disponible */
        text-align: center;
        min-width: 0; /* Permite que se encojan */
        letter-spacing: normal; /* Sin espaciado extra */
        text-transform: none; /* Sin mayúsculas */
    }
    /* Botón único ocupa todo el ancho */
    .botones-navegacion button:only-child { flex-grow: 0; width: 100%; }
    /* Botones en revisión final en columna */
    #seccion-revision .botones-navegacion { flex-direction: column; align-items: stretch; gap: 10px; }
    #seccion-revision .botones-navegacion button { width: 100%; }

    /* Resumen Final Móvil */
    #seccion-revision #resumen-final { padding: 15px; }
    #seccion-revision #resumen-final li { flex-direction: column; gap: 4px; align-items: flex-start; } /* Label encima de valor */
    #seccion-revision #resumen-final li strong { min-width: auto; } /* Ancho automático para label */

    /* Modal Móvil */
    #modal-container { padding: 25px 20px; max-width: 90%; }
    #modal-title { font-size: 1.4em; }
    #modal-message { font-size: 1em; }
    #modal-buttons { flex-direction: column; gap: 10px; } /* Botones en columna */
    #modal-buttons button { width: 100%; }

    /* Switch Tema Móvil */
    .theme-switch { width: 45px; height: 22px; }
    .theme-switch .slider { width: 18px; height: 18px; }
    .theme-switch input:checked + .slider { transform: translateX(23px); }
    .slider .icon.material-symbols-outlined { font-size: 14px; }

    /* Botón Toggle Sidebar Móvil (Posición fija) */
    .sidebar-toggle {
        /* Importante anular estilos desktop */
        position: fixed !important;
        left: 10px !important; /* Fijo a la izquierda */
        top: 70px !important;  /* Debajo de cabecera móvil */
        z-index: 16 !important; /* Encima del sidebar móvil */
        transition: none !important; /* Sin transición de posición */
    }
    /* Asegura posición fija sin importar clases de estado desktop */
     body.body-sidebar-expanded .sidebar-toggle,
     body.body-sidebar-collapsed .sidebar-toggle {
         left: 10px !important;
         top: 70px !important;
     }

} /* Fin Media Query Móvil */